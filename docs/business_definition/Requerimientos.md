# Requerimientos del Sistema

## Requisitos Funcionales

> *Cada requisito se deriva del Manifiesto de Dominio Sistémico (MDS) y describe una capacidad que la aplicación Android debe implementar. La base de datos es local (sin red).*

| ID | Requerimiento Funcional | Prioridad |
| --- | --- | --- |
| RF01 | El sistema debe permitir registrar el perfil del ejecutante con los siguientes datos: peso corporal (Kg), altura (m) y nivel de experiencia (principiante, intermedio, avanzado). | Esencial |
| RF02 | El sistema debe permitir actualizar los datos del perfil del ejecutante en cualquier momento. | Esencial |
| RF03 | El sistema debe almacenar un historial de cambios del peso corporal con la fecha de cada actualización, permitiendo al ejecutante consultar su evolución de peso en el tiempo. | Deseado |
| RF04 | El sistema debe contener precargado el Diccionario de Ejercicios con un catálogo base de ejercicios clasificados por módulo (A, B, C), tipo de equipo y zona muscular. El ejecutante puede ampliar el diccionario con ejercicios propios (RF62). | Esencial |
| RF05 | El sistema debe contener precargado el Plan de Entrenamiento con los módulos, sus versiones (entre 2 y 3 por módulo) y los ejercicios asignados a cada combinación módulo-versión, junto con el número de series (4) y el rango de repeticiones (8-12 o condición especial). | Esencial |
| RF06 | El sistema debe presentar los ejercicios de cada versión del plan como un listado sin orden obligatorio de ejecución; el listado no implica secuencia. | Esencial |
| RF07 | El sistema debe permitir consultar el Diccionario de Ejercicios con filtros por módulo, tipo de equipo y zona muscular. | Deseado |
| RF08 | El sistema debe permitir consultar el Plan de Entrenamiento mostrando, para cada módulo y versión, los ejercicios asignados con su zona muscular, tipo de equipo, series y rango de repeticiones. | Esencial |
| RF09 | El sistema debe determinar automáticamente qué módulo corresponde ejecutar según la posición actual en la rotación cíclica (A→B→C→A→B→C), basándose únicamente en la secuencia de sesiones completadas, sin considerar el día de la semana ni la fecha del calendario. | Esencial |
| RF10 | El sistema debe determinar automáticamente qué versión del módulo corresponde según la secuencia de versiones (V1→V2→V3→V1 para todos los módulos). | Esencial |
| RF11 | El sistema debe persistir la posición en la rotación de módulos y la secuencia de versiones de forma indefinida en la base de datos local, sin reiniciarla por ausencias del ejecutante independientemente de su duración. | Esencial |
| RF12 | El sistema debe permitir iniciar una nueva sesión mostrando: el módulo y versión que corresponde, la lista de ejercicios prescritos para esa combinación, y la carga objetivo para cada ejercicio derivada de su último registro histórico. | Esencial |
| RF13 | El sistema debe permitir registrar los datos de cada serie de un ejercicio durante una sesión activa, capturando: Peso en Kg (≥ 0), Repeticiones logradas (≥ 1) y RIR en escala de 0 a 5. | Esencial |
| RF14 | El sistema debe asociar automáticamente cada registro de serie con la Fecha actual, el Módulo, la Versión, el Ejercicio ejecutado y el Número de Serie secuencial (1, 2, 3, 4), sin requerir que el ejecutante ingrese estos datos manualmente. | Esencial |
| RF15 | El sistema debe permitir al ejecutante registrar los ejercicios de la sesión en cualquier orden, sin imponer la secuencia en que aparecen en el Plan de Entrenamiento. | Esencial |
| RF16 | El sistema debe permitir sustituir puntualmente un ejercicio prescrito por otro ejercicio del mismo módulo (disponible en cualquier versión del módulo) durante una sesión activa, sin modificar el Plan de Entrenamiento original para futuras sesiones. | Esencial |
| RF17 | El sistema debe vincular los datos registrados de cada serie al ejercicio que realmente se ejecutó (incluyendo sustituciones), garantizando que la toma de datos sea coherente con lo que efectivamente se realizó en la sesión. | Esencial |
| RF18 | El sistema debe permitir cerrar una sesión como "Completada" cuando todas las series de todos los ejercicios de la sesión hayan sido registradas. | Esencial |
| RF19 | El sistema debe permitir cerrar una sesión como "Incompleta" cuando el ejecutante no pueda finalizar todos los ejercicios, conservando todos los datos parciales registrados hasta ese momento. | Esencial |
| RF20 | El sistema debe calcular automáticamente el tonelaje de la sesión al cerrarla, sumando el producto de Peso × Repeticiones de todas las series registradas en la sesión. | Esencial |
| RF21 | El sistema debe actualizar la posición en la rotación cíclica de módulos y la secuencia de versiones únicamente al cerrar una sesión (ya sea Completada o Incompleta), avanzando al siguiente módulo y registrando la versión ejecutada. | Esencial |
| RF22 | El sistema debe mostrar durante una sesión activa el estado de cada ejercicio: No Iniciado (0 series registradas), En Ejecución (entre 1 y 3 series registradas) o Completado (4 series registradas). | Deseado |
| RF23 | El sistema debe comparar, al cerrar una sesión, los datos de cada ejercicio contra su último registro histórico del mismo ejercicio (independientemente del módulo-versión), evaluando si hubo aumento de carga, aumento de repeticiones o variación significativa del RIR. | Esencial |
| RF24 | El sistema debe clasificar automáticamente la progresión de cada ejercicio en una sesión como: "Progresión positiva" (aumentó carga y/o repeticiones con RIR estable), "Mantenimiento" (misma carga y repeticiones, RIR estable) o "Regresión" (disminuyó carga o repeticiones, o el RIR subió ≥ 1.5 puntos con la misma carga). | Esencial |
| RF25 | El sistema debe señalar que un ejercicio está listo para incrementar carga cuando en la sesión más reciente se alcanzaron ≥ 12 repeticiones en al menos 3 de las 4 series y el RIR promedio de las 4 series fue ≥ 2 (Regla de Doble Umbral). | Esencial |
| RF26 | El sistema debe calcular y prescribir la carga objetivo para la próxima sesión de un ejercicio que cumplió la Regla de Doble Umbral, incrementando la carga actual en 2.5 Kg para ejercicios de los Módulos A y B (tren superior) y en 5 Kg para ejercicios del Módulo C (tren inferior). | Esencial |
| RF27 | El sistema debe prescribir la misma carga para la próxima sesión de un ejercicio que no cumplió la Regla de Doble Umbral, manteniendo el objetivo de progresar en repeticiones dentro del rango de 8 a 12. | Esencial |
| RF28 | El sistema debe calcular el RIR promedio de las 4 series de un ejercicio en cada sesión y almacenarlo como dato derivado para su uso en reglas de decisión y KPIs. | Esencial |
| RF29 | El sistema debe detectar regresión en un ejercicio cuando, comparado con su última sesión, el peso es igual pero las repeticiones caen en ≥ 2 de las 4 series, o el RIR promedio sube en ≥ 1.5 puntos con la misma carga y repeticiones similares. | Esencial |
| RF30 | El sistema debe detectar fatiga acumulada de un módulo cuando se identifica regresión simultánea en ≥ 50% de los ejercicios de una misma sesión. | Esencial |
| RF31 | Para ejercicios de peso corporal (Peso = 0 Kg), el sistema debe medir la progresión exclusivamente por el total de repeticiones logradas en las 4 series, sin aplicar la Regla de Doble Umbral de carga. | Esencial |
| RF32 | Para ejercicios isométricos (Plancha, Plancha Lateral), el sistema debe registrar la duración en segundos en lugar de repeticiones y medir la progresión por los segundos sostenidos dentro del rango prescrito de 30 a 45 segundos. | Esencial |
| RF33 | El sistema debe marcar un ejercicio isométrico como "dominado" cuando las 4 series alcancen ≥ 45 segundos, indicando al ejecutante que el ejercicio ya no ofrece estímulo progresivo suficiente. | Deseado |
| RF34 | El sistema debe detectar que un ejercicio está en estado de "Meseta" cuando no se ha registrado progresión positiva (ni en carga ni en repeticiones) durante 3 sesiones consecutivas del mismo ejercicio. | Esencial |
| RF35 | El sistema debe emitir una alerta de meseta al ejecutante cuando un ejercicio entra en estado de Meseta, incluyendo un análisis causal basado en los datos: RIR consistentemente bajo (0-1) indica límite de carga, RIR alto (3+) indica carga conservadora, y estancamiento grupal indica fatiga sistémica del grupo muscular. | Esencial |
| RF36 | El sistema debe recomendar acciones correctivas escalonadas ante una meseta: en la sesión 4 sin progreso, recomendar microincremento de carga o extensión de repeticiones; en la sesión 6 sin progreso, recomendar rotar a otra versión del módulo. | Esencial |
| RF37 | El sistema debe detectar que un módulo requiere descarga cuando ≥ 50% de sus ejercicios están simultáneamente en estado de Meseta o Regresión, o cuando se detecta fatiga acumulada del módulo (RF30). | Esencial |
| RF38 | El sistema debe permitir activar un modo de Descarga (Deload) que ajuste los parámetros de la prescripción de sesión: carga al 60% de la carga habitual, mantener 4 series, repeticiones en el límite inferior del rango (8), y RIR objetivo de 4-5. | Esencial |
| RF39 | El sistema debe mantener la descarga activa durante 1 microciclo completo (A-B-C-A-B-C), sin cambiar la versión del módulo durante el período de descarga. | Esencial |
| RF40 | El sistema debe calcular automáticamente la carga de reinicio post-descarga al 90% de la última carga de trabajo pre-descarga para cada ejercicio, y utilizarla como carga objetivo para la primera sesión del nuevo mesociclo. | Esencial |
| RF41 | El sistema debe llevar un conteo de microciclos completados, incrementándolo cada vez que los 6 módulos de la rotación (A-B-C-A-B-C) hayan sido ejecutados. | Esencial |
| RF42 | El sistema debe monitorear la tendencia de progresión de cada grupo muscular a lo largo de los últimos 4 a 6 microciclos completados, evaluando la trayectoria del tonelaje acumulado y la tasa de progresión de los ejercicios asociados. | Deseado |
| RF43 | El sistema debe almacenar el estado de progresión de cada ejercicio a lo largo del tiempo: Sin Historial, En Progresión, En Meseta o En Descarga, actualizándolo automáticamente según los eventos de sesión y las reglas de negocio. | Esencial |
| RF44 | El sistema debe calcular la Tasa de Progresión por Ejercicio: porcentaje de sesiones con progresión positiva respecto al total de sesiones del ejercicio en un período configurable, con evaluación por defecto cada 4 semanas. | Esencial |
| RF45 | El sistema debe calcular el Tonelaje Acumulado por Grupo Muscular por microciclo, sumando el producto de Peso × Repeticiones de todas las series de todos los ejercicios que trabajan ese grupo muscular. | Esencial |
| RF46 | El sistema debe calcular el RIR Promedio por Módulo, promediando aritméticamente todos los valores de RIR registrados en todas las series de las sesiones del módulo en un período dado. | Esencial |
| RF47 | El sistema debe calcular el Índice de Adherencia semanal: sesiones completadas en la semana divididas por las sesiones planificadas (objetivo de frecuencia del ejecutante, entre 4 y 6), expresado como porcentaje. | Esencial |
| RF48 | El sistema debe calcular la Velocidad de Progresión de Carga por ejercicio: diferencia entre el peso actual y el peso inicial, dividida por el número de sesiones intermedias. | Deseado |
| RF49 | El sistema debe calcular la Distribución de Volumen por Zona Muscular por microciclo: porcentaje de series totales de cada zona muscular respecto al total de series del módulo. | Deseado |
| RF50 | El sistema debe permitir al ejecutante consultar el historial completo de registros de un ejercicio específico, mostrando para cada sesión: fecha, peso, repeticiones, RIR y clasificación de progresión, ordenados cronológicamente. | Esencial |
| RF51 | El sistema debe permitir al ejecutante visualizar la tendencia de carga de un ejercicio a lo largo del tiempo, mostrando la evolución del peso utilizado en sus sesiones históricas. | Esencial |
| RF52 | El sistema debe permitir al ejecutante consultar el tonelaje acumulado por grupo muscular a lo largo de los microciclos, identificando tendencias ascendentes, estables o en caída. | Deseado |
| RF53 | El sistema debe emitir una alerta cuando la Tasa de Progresión de un ejercicio sea < 40% en un período de 4 semanas (umbral de alerta) y una alerta de crisis cuando sea < 20% en el mismo período. | Esencial |
| RF54 | El sistema debe emitir una alerta cuando el RIR Promedio de un módulo sea < 1.5 de forma sostenida durante 2 o más sesiones, recomendando prescribir una descarga. | Esencial |
| RF55 | El sistema debe emitir una alerta cuando el RIR Promedio de un módulo sea > 3.5 de forma sostenida durante 2 o más sesiones, recomendando incrementar la carga de los ejercicios del módulo. | Esencial |
| RF56 | El sistema debe emitir una alerta informativa cuando la Adherencia Semanal sea < 60% en una semana, y una alerta de crisis si se mantiene < 60% durante 2 o más semanas consecutivas. | Deseado |
| RF57 | El sistema debe emitir una alerta cuando el Tonelaje de un Grupo Muscular caiga > 10% respecto al microciclo anterior (alerta), o > 20% (crisis), verificando si la caída corresponde a una descarga planificada o a una regresión no intencional. | Deseado |
| RF58 | El sistema debe emitir una alerta cuando transcurran más de 10 días naturales sin ejecutar un módulo específico, y una alerta de crisis si superan los 14 días, informando al ejecutante que el grupo muscular asociado puede estar perdiendo adaptaciones. | Deseado |
| RF59 | El sistema debe mostrar al ejecutante un resumen de la sesión al cerrarla, incluyendo: tonelaje total, cantidad de ejercicios completados, clasificación de progresión por ejercicio y señales de acción para la próxima sesión (subir carga, mantener o descargar). | Esencial |
| RF60 | El sistema debe permitir al ejecutante consultar el historial de sesiones pasadas, mostrando para cada sesión: fecha, módulo, versión, estado (Completada/Incompleta), tonelaje total y los ejercicios ejecutados con sus datos. | Esencial |
| RF61 | El sistema debe mostrar para cada ejercicio del Diccionario una imagen estática (PNG) que ilustre la ejecución correcta del movimiento, accesible desde la consulta del diccionario y durante el registro de series en una sesión activa. En futuras iteraciones, las imágenes estáticas podrán ser reemplazadas por videos o animaciones (GIF u otro formato) sin cambios en la arquitectura. | Esencial |
| RF62 | El sistema debe permitir al ejecutante crear un nuevo ejercicio en el Diccionario proporcionando: nombre, módulo al que pertenece (A, B o C), tipo de equipo (seleccionable de los tipos existentes), zona(s) muscular(es) objetivo (seleccionable de las zonas existentes), y opcionalmente indicar si es de peso corporal, isométrico o al fallo técnico. El ejercicio creado se integra al catálogo de forma permanente y queda disponible para sustitución en sesiones y para asignación a versiones del plan. Opcionalmente, el ejecutante puede seleccionar una imagen desde la galería del dispositivo para representar visualmente el ejercicio; si no selecciona imagen, se muestra un placeholder. La imagen puede agregarse o modificarse en cualquier momento desde el detalle del ejercicio (D2). | Deseado |
| RF63 | El sistema debe permitir al ejecutante asignar un ejercicio del Diccionario (precargado o creado por el ejecutante) a una versión específica de un módulo del Plan de Entrenamiento, especificando series (por defecto 4) y rango de repeticiones (por defecto 8-12). La asignación no altera las asignaciones existentes de otras versiones. | Deseado |
| RF64 | El sistema debe permitir al ejecutante desasignar (remover) un ejercicio de una versión específica del Plan de Entrenamiento. Los ejercicios precargados y los creados por el ejecutante pueden ser removidos de versiones del plan. La desasignación no elimina el ejercicio del Diccionario ni afecta su historial registrado. | Deseado |

## Requisitos NO Funcionales

> *Los requisitos no funcionales definen las características de calidad del sistema. Están alineados con el contexto de uso: una aplicación Android personal, 100% offline, con lógica de dominio densa y datos que crecen indefinidamente.*

| ID | Requisito No Funcional | Categoría |
| --- | --- | --- |
| RNF01 | El sistema debe mantener un rendimiento fluido en todas las operaciones de usuario (registro de series, cálculos de progresión, consultas de historial, cierre de sesión). Las operaciones de cálculo y persistencia no deben bloquear la interfaz de usuario. | Rendimiento |
| RNF02 | El registro de una serie debe requerir un máximo de 3 toques después de seleccionar el ejercicio: ingresar peso, ingresar repeticiones, ingresar RIR y confirmar. | Usabilidad |
| RNF03 | Los campos de entrada numérica (peso, repeticiones, RIR) deben mostrar un teclado numérico optimizado, no el teclado alfanumérico completo. | Usabilidad |
| RNF04 | El sistema debe pre-cargar el último peso utilizado en cada campo de peso, permitiendo al ejecutante confirmar rápidamente si la carga no cambió. | Usabilidad |
| RNF05 | Las señales de progresión (↑ Progresión, = Mantenimiento, ↓ Regresión) deben ser visualmente distinguibles mediante colores e iconografía, sin depender únicamente del texto. | Usabilidad |
| RNF06 | El tamaño mínimo de los elementos interactivos (botones, campos) debe ser de 48x48 dp, siguiendo las guías de accesibilidad de Material Design. | Usabilidad |
| RNF07 | El sistema debe funcionar únicamente en modo vertical (portrait). No se requiere soporte para modo horizontal (landscape). | Usabilidad |
| RNF08 | Toda la interfaz de usuario debe estar en idioma español. No se requiere soporte multiidioma. | Usabilidad |
| RNF09 | El sistema debe funcionar 100% offline, sin requerir conexión a internet para ninguna funcionalidad core (registro, consulta, cálculos). | Disponibilidad |
| RNF10 | El sistema debe preservar todos los datos de una sesión en progreso si la aplicación se cierra inesperadamente (por cierre del usuario, falta de batería o crash). Al reabrir, la sesión debe poder continuarse. | Confiabilidad |
| RNF11 | El sistema no debe perder datos registrados bajo ninguna circunstancia de uso normal. La base de datos debe usar transacciones atómicas para garantizar consistencia. | Confiabilidad |
| RNF12 | El sistema debe validar todos los datos de entrada antes de persistirlos, rechazando valores fuera de los rangos permitidos (peso < 0, RIR > 5, etc.) con mensajes de error claros. | Confiabilidad |
| RNF13 | El estado de rotación (módulo actual, versión por módulo) debe persistir de forma durable y sobrevivir a reinicios de la aplicación, reinicios del dispositivo y actualizaciones de la app. | Confiabilidad |
| RNF14 | Todos los datos del sistema (perfil, sesiones, registros, estado de rotación, progresión de ejercicios) deben almacenarse en una base de datos local SQLite mediante Room. | Persistencia |
| RNF15 | El sistema debe proporcionar una funcionalidad de exportación de respaldo (backup) que genere un archivo con todos los datos del usuario, almacenable en el almacenamiento externo del dispositivo o compartible vía aplicaciones del sistema (Drive, correo, etc.). | Persistencia |
| RNF16 | El sistema debe proporcionar una funcionalidad de importación de respaldo (restore) que permita cargar un archivo de backup previamente exportado, reemplazando los datos actuales previa confirmación del usuario. | Persistencia |
| RNF17 | El formato del archivo de backup debe ser autodescriptivo (JSON o SQLite exportado) e incluir metadatos de versión para permitir migraciones futuras. | Persistencia |
| RNF18 | El proceso de backup/restore debe completarse en menos de 10 segundos para un historial de hasta 2 años de datos. | Persistencia |
| RNF19 | El sistema debe manejar migraciones de esquema de base de datos de forma automática y sin pérdida de datos cuando se actualice la aplicación. | Persistencia |
| RNF20 | El sistema debe ser compatible con Android 8.0 (API nivel 26) como versión mínima, cubriendo aproximadamente el 95% de dispositivos Android activos. | Compatibilidad |
| RNF21 | El sistema debe soportar pantallas desde 5 pulgadas hasta 7 pulgadas, adaptando el layout de forma responsiva. No se requiere soporte para tablets. | Compatibilidad |
| RNF22 | El sistema debe funcionar correctamente en dispositivos con resoluciones desde 720p (HD) hasta 1440p (QHD). | Compatibilidad |
| RNF23 | El sistema debe respetar la configuración de tema del sistema operativo Android (claro/oscuro), adaptando automáticamente los colores de la interfaz según el modo activo del dispositivo, incluyendo el modo dinámico basado en horario. | Compatibilidad |
| RNF24 | El APK generado no debe exceder los 150 MB de tamaño, considerando que incluye assets multimedia (imágenes PNG) para los 43 ejercicios precargados del Diccionario. Los assets deben estar optimizados para dispositivos móviles. Los ejercicios creados por el ejecutante pueden incluir opcionalmente una imagen seleccionada desde la galería del dispositivo, almacenada en el almacenamiento interno de la app (no contribuye al tamaño del APK). Si no se selecciona imagen, se muestra un placeholder. La imagen puede agregarse o cambiarse en cualquier momento desde el detalle del ejercicio. En futuras iteraciones, si se migra a video/GIF, el límite se mantiene. | Compatibilidad |
| RNF25 | Los datos almacenados en la base de datos local no requieren cifrado, dado que es una aplicación de uso personal y los datos no son sensibles (no hay información financiera, médica protegida ni credenciales). | Seguridad |
| RNF26 | El archivo de backup exportado no requiere cifrado, pero debe incluir una advertencia al usuario de que contiene sus datos de entrenamiento. | Seguridad |
| RNF27 | El sistema no debe requerir permisos más allá de los estrictamente necesarios: almacenamiento (para backup/restore) y ninguno más para funcionalidad core. | Seguridad |
| RNF28 | El código debe seguir la arquitectura View-ViewModel-Model (MVVM), donde la View (Jetpack Compose) maneja la presentación, el ViewModel gestiona el estado y la lógica de presentación, y el Model encapsula la lógica de negocio (motor de reglas de progresión) y el acceso a datos. | Mantenibilidad |
| RNF29 | El motor de reglas de progresión (Reglas 1-7 del MDS) debe estar implementado como un módulo independiente, testeable unitariamente sin dependencias de Android. | Mantenibilidad |
| RNF30 | El sistema debe incluir pruebas unitarias para todas las reglas de negocio críticas: Regla de Doble Umbral, clasificación de progresión, detección de meseta, detección de fatiga y protocolo de descarga. | Mantenibilidad |
| RNF31 | El seed data (Diccionario de Ejercicios, Plan de Entrenamiento y assets multimedia de ejercicios) debe estar definido en archivos de recursos o código fuente versionado, no hardcodeado en múltiples lugares, permitiendo actualizaciones centralizadas. El formato de assets (actualmente PNG, con posibilidad de migrar a video/GIF en futuras iteraciones) no debe afectar esta regla. | Mantenibilidad |
| RNF32 | El sistema debe usar inyección de dependencias para facilitar el testing y el reemplazo de implementaciones. | Mantenibilidad |
| RNF33 | El sistema debe desarrollarse en Kotlin como lenguaje principal, aprovechando las características del lenguaje (null safety, coroutines, extension functions). | Restricción Técnica |
| RNF34 | La interfaz de usuario debe implementarse con Jetpack Compose, no con el sistema de vistas XML tradicional. | Restricción Técnica |
| RNF35 | El sistema debe usar Room como ORM para la persistencia local, aprovechando la integración con coroutines y Flow para operaciones reactivas. | Restricción Técnica |
| RNF36 | El sistema debe usar el sistema de build Gradle con version catalog (libs.versions.toml) para gestión centralizada de dependencias. | Restricción Técnica |
| RNF37 | El sistema debe ser distribuible como APK firmado para instalación directa, sin requerir publicación en Google Play Store para su uso inicial. | Restricción Técnica |
