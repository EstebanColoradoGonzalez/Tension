# HU-19 — Calcular KPIs de rendimiento por ejercicio

## Requisitos relacionados

RF44, RF48

## Descripción

Como ejecutante, quiero que el sistema calcule la Tasa de Progresión y la Velocidad de Progresión de Carga para cada ejercicio, para saber objetivamente qué tan rápido estoy progresando, identificar qué ejercicios responden mejor al estímulo y cuáles necesitan intervención.

## Criterios de Aceptación

### CA-19.01 — Cálculo de la Tasa de Progresión por Ejercicio

**Dado que** un ejercicio tiene historial de múltiples sesiones registradas,
**cuando** el sistema calcula la Tasa de Progresión,
**entonces** aplica la fórmula: (Sesiones con progresión positiva / Total de sesiones del ejercicio) × 100, expresando el resultado como porcentaje.

### CA-19.02 — Período de evaluación configurable con valor por defecto

**Dado que** el sistema calcula la Tasa de Progresión de un ejercicio,
**cuando** determina el rango temporal de evaluación,
**entonces** utiliza por defecto un período de 4 semanas, pero permite configurar períodos alternativos para el análisis.

### CA-19.03 — Cálculo de la Velocidad de Progresión de Carga

**Dado que** un ejercicio tiene historial con al menos 2 sesiones registradas donde se utilizó carga (Peso > 0),
**cuando** el sistema calcula la Velocidad de Progresión de Carga,
**entonces** aplica la fórmula: (Peso actual − Peso inicial) / Número de sesiones intermedias, expresando el resultado en Kg por sesión.

### CA-19.04 — Velocidad de Progresión para ejercicios sin incremento

**Dado que** un ejercicio tiene historial pero no ha incrementado carga (Peso actual = Peso inicial),
**cuando** el sistema calcula la Velocidad de Progresión de Carga,
**entonces** el resultado es 0 Kg/sesión, confirmando numéricamente una meseta activa en carga.

### CA-19.05 — Ejercicios de peso corporal excluidos de Velocidad de Carga

**Dado que** un ejercicio es de peso corporal (Peso = 0 Kg),
**cuando** el sistema calcula KPIs de rendimiento,
**entonces** calcula la Tasa de Progresión normalmente pero no calcula la Velocidad de Progresión de Carga (no aplica ya que no hay variación de peso).

### CA-19.06 — Presentación de KPIs al ejecutante

**Dado que** el sistema ha calculado los KPIs de rendimiento para un ejercicio,
**cuando** el ejecutante consulta las métricas del ejercicio,
**entonces** muestra la Tasa de Progresión (%) y la Velocidad de Progresión de Carga (Kg/sesión) de forma clara con el período de evaluación utilizado.
