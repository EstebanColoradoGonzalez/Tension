# HU-21 — Calcular KPIs de intensidad y adherencia

## Requisitos relacionados

RF46, RF47

## Descripción

Como ejecutante, quiero que el sistema calcule el RIR Promedio por Módulo y el Índice de Adherencia semanal, para saber si estoy entrenando en la zona de intensidad óptima (RIR 2-3) y si mi constancia de asistencia al gimnasio es suficiente para generar adaptaciones confiables.

## Criterios de Aceptación

### CA-21.01 — Cálculo del RIR Promedio por Módulo

**Dado que** un módulo tiene sesiones registradas en un período dado,
**cuando** el sistema calcula el RIR Promedio por Módulo,
**entonces** promedia aritméticamente todos los valores de RIR registrados en todas las series de todas las sesiones del módulo en el período, expresando el resultado con un decimal.

### CA-21.02 — Período de evaluación del RIR Promedio

**Dado que** el sistema calcula el RIR Promedio por Módulo,
**cuando** determina el rango temporal,
**entonces** evalúa por defecto las últimas 2 ejecuciones del mismo módulo, permitiendo al ejecutante consultar períodos más amplios.

### CA-21.03 — Interpretación del RIR Promedio

**Dado que** el sistema muestra el RIR Promedio de un módulo al ejecutante,
**cuando** presenta el resultado,
**entonces** incluye una referencia de interpretación: RIR 2-3 = zona óptima, RIR < 1.5 = demasiado cerca del fallo (riesgo de fatiga del SNC), RIR > 3.5 = estímulo posiblemente insuficiente.

### CA-21.04 — Cálculo del Índice de Adherencia Semanal

**Dado que** una semana natural ha transcurrido,
**cuando** el sistema calcula el Índice de Adherencia semanal,
**entonces** aplica la fórmula: (Sesiones completadas en la semana / Sesiones planificadas) × 100, donde "sesiones planificadas" es el objetivo de frecuencia del ejecutante (entre 4 y 6), expresando el resultado como porcentaje.

### CA-21.05 — Objetivo de frecuencia del ejecutante

**Dado que** el sistema calcula el Índice de Adherencia,
**cuando** necesita el denominador (sesiones planificadas),
**entonces** utiliza el objetivo de frecuencia definido por el ejecutante en su perfil, aceptando valores entre 4 y 6 sesiones semanales.

### CA-21.06 — Sesiones contabilizadas para adherencia

**Dado que** el sistema calcula las sesiones completadas en la semana,
**cuando** contabiliza sesiones,
**entonces** incluye sesiones cerradas tanto como Completadas como Incompletas, ya que ambos tipos representan asistencia al gimnasio y ambos avanzan la rotación.

### CA-21.07 — Presentación de KPIs al ejecutante

**Dado que** el sistema ha calculado los KPIs de intensidad y adherencia,
**cuando** el ejecutante consulta las métricas,
**entonces** muestra el RIR Promedio por Módulo (para cada módulo A, B, C) y el Índice de Adherencia semanal con el período evaluado y la referencia de interpretación.
