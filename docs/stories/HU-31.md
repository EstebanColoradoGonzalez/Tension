# HU-31 — Exportar respaldo de datos

## Requisitos relacionados

RNF15, RNF17, RNF18, RNF26, RNF27

## Descripción

Como ejecutante, quiero poder exportar un respaldo completo de todos mis datos de entrenamiento en un archivo autodescriptivo, para proteger mi historial ante pérdida o cambio de dispositivo y tener la tranquilidad de que meses o años de datos no están atados a un solo dispositivo.

## Criterios de Aceptación

### CA-31.01 — Generación del archivo de backup

**Dado que** el ejecutante desea respaldar sus datos,
**cuando** ejecuta la funcionalidad de exportación de respaldo,
**entonces** el sistema genera un archivo que contiene todos los datos del usuario: perfil, historial de peso, sesiones, registros de series, estado de rotación, estados de progresión de ejercicios, conteo de microciclos y configuraciones.

### CA-31.02 — Formato autodescriptivo con metadatos de versión

**Dado que** el sistema genera el archivo de backup,
**cuando** construye la estructura del archivo,
**entonces** utiliza un formato autodescriptivo (JSON o SQLite exportado) que incluye metadatos de versión del esquema de datos de la aplicación, permitiendo migraciones futuras si la estructura de datos evoluciona en nuevas versiones de la app.

### CA-31.03 — Almacenamiento y compartición

**Dado que** el sistema ha generado el archivo de backup,
**cuando** completa la exportación,
**entonces** permite al ejecutante almacenar el archivo en el almacenamiento externo del dispositivo o compartirlo vía aplicaciones del sistema operativo (Google Drive, correo electrónico, mensajería, etc.).

### CA-31.04 — Rendimiento de la exportación

**Dado que** el ejecutante ejecuta la exportación de respaldo,
**cuando** el sistema procesa la generación del archivo,
**entonces** el proceso completo se ejecuta en menos de 10 segundos para un historial de hasta 2 años de datos de entrenamiento.

### CA-31.05 — Advertencia sobre contenido del archivo

**Dado que** el sistema genera el archivo de backup sin cifrado,
**cuando** presenta el archivo al ejecutante o antes de iniciar la exportación,
**entonces** muestra una advertencia informativa indicando que el archivo contiene sus datos de entrenamiento y que no está cifrado.

### CA-31.06 — Permisos mínimos requeridos

**Dado que** el sistema necesita acceder al almacenamiento para exportar el backup,
**cuando** solicita permisos al sistema operativo,
**entonces** solo solicita el permiso de almacenamiento estrictamente necesario para la operación de backup, sin requerir permisos adicionales innecesarios.

### CA-31.07 — Indicación de progreso y confirmación

**Dado que** el ejecutante inicia la exportación,
**cuando** el sistema procesa la generación del archivo,
**entonces** muestra una indicación de progreso durante el proceso y una confirmación clara al completarse exitosamente, incluyendo la ubicación o destino del archivo.
