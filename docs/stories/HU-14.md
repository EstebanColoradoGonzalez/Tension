# HU-14 — Protocolo de Descarga y Conteo de Microciclos

## Requisitos relacionados

RF38, RF39, RF40, RF41

## Descripción

Como ejecutante, quiero poder activar un modo de descarga (Deload) que ajuste automáticamente las cargas al 60%, mantenerlo durante un microciclo completo, que al finalizar el sistema calcule mis cargas de reinicio al 90%, y que el sistema lleve un conteo preciso de todos mis microciclos completados, para recuperar mi SNC y tejidos conectivos de forma estructurada, retomar el entrenamiento aprovechando la supercompensación, y tener una referencia clara de cuántos ciclos completos de entrenamiento llevo acumulados.

## Historias originales consolidadas

Esta historia consolida las siguientes historias del diseño original, que son funcionalmente inseparables (la descarga se mide en microciclos, y el conteo de microciclos incluye los de descarga):

- **HU-17 original** — Activar y gestionar ciclo de descarga completo (RF38, RF39, RF40)
- **HU-18 original** — Contar microciclos completados (RF41)

---

## Criterios de Aceptación

### Bloque A — Activación y Gestión del Ciclo de Descarga (RF38, RF39, RF40)

#### CA-14.01 — Activación del modo Descarga

**Dado que** el sistema ha señalado que un módulo requiere descarga (HU-12) o el ejecutante decide proactivamente descargar,
**cuando** el ejecutante activa el modo de Descarga,
**entonces** el sistema ajusta los parámetros de prescripción para todas las sesiones del período de descarga: carga al 60% de la carga habitual de cada ejercicio, mantener 4 series por ejercicio, repeticiones en el límite inferior del rango (8), y RIR objetivo de 4-5.

#### CA-14.02 — Cálculo del 60% de carga por ejercicio

**Dado que** el modo de Descarga está activo,
**cuando** el sistema prescribe la carga para un ejercicio en una sesión de descarga,
**entonces** calcula el 60% de la última carga de trabajo registrada para ese ejercicio, redondeando al incremento más cercano disponible (2.5 Kg para tren superior, 5 Kg para tren inferior).

#### CA-14.03 — Duración del modo Descarga: 1 microciclo completo

**Dado que** el modo de Descarga está activo,
**cuando** el ejecutante completa sesiones durante la descarga,
**entonces** el modo se mantiene activo durante exactamente 1 microciclo completo (A-B-C-A-B-C = 6 sesiones), desactivándose automáticamente al cerrar la sexta sesión del microciclo de descarga.

#### CA-14.04 — Versión congelada durante la descarga

**Dado que** el modo de Descarga está activo,
**cuando** el sistema determina la versión del módulo para cada sesión de descarga,
**entonces** mantiene la misma versión que estaba activa al momento de activar la descarga para cada módulo respectivo; la secuencia de versiones no avanza durante el período de descarga.

#### CA-14.05 — Cálculo de carga de reinicio post-descarga

**Dado que** el modo de Descarga ha finalizado tras completar el microciclo,
**cuando** el sistema calcula las cargas para el nuevo mesociclo,
**entonces** prescribe para cada ejercicio una carga de reinicio equivalente al 90% de la última carga de trabajo pre-descarga, no el 90% de la carga de descarga.

#### CA-14.06 — Redondeo de la carga de reinicio

**Dado que** el sistema calcula la carga de reinicio al 90%,
**cuando** el resultado no es un múltiplo exacto del incremento mínimo (2.5 Kg o 5 Kg),
**entonces** redondea al incremento más cercano disponible según el módulo del ejercicio (redondeando hacia abajo para proteger al ejecutante).

#### CA-14.07 — Indicación visual del modo Descarga

**Dado que** el modo de Descarga está activo,
**cuando** el ejecutante visualiza la sesión o la prescripción,
**entonces** el sistema indica claramente que se está en período de descarga, mostrando las cargas ajustadas y cuántas sesiones restan para completar el microciclo de descarga.

#### CA-14.08 — Transición al nuevo mesociclo

**Dado que** el modo de Descarga finaliza,
**cuando** el ejecutante inicia la primera sesión post-descarga,
**entonces** el sistema presenta las cargas de reinicio (90% pre-descarga) como cargas objetivo, la secuencia de versiones retoma su avance normal, y los estados de progresión de los ejercicios se actualizan de "En Descarga" al estado que corresponda según los nuevos registros.

#### CA-14.09 — Ejercicios de peso corporal e isométricos durante descarga

**Dado que** el modo de Descarga está activo y la sesión incluye ejercicios de peso corporal o isométricos,
**cuando** el sistema prescribe parámetros de descarga,
**entonces** para ejercicios de peso corporal prescribe 8 repeticiones con RIR 4-5 (sin ajuste de carga porque Peso = 0), y para isométricos prescribe 30 segundos con RIR 4-5.

### Bloque B — Conteo de Microciclos (RF41)

#### CA-14.10 — Incremento del contador al completar un microciclo

**Dado que** el ejecutante ha cerrado sesiones de entrenamiento,
**cuando** los 6 módulos de la rotación (A-B-C-A-B-C) han sido ejecutados desde el último incremento,
**entonces** el sistema incrementa el conteo de microciclos completados en 1.

#### CA-14.11 — Conteo basado en la rotación, no en el calendario

**Dado que** el sistema lleva el conteo de microciclos,
**cuando** evalúa si un microciclo se ha completado,
**entonces** se basa exclusivamente en la secuencia de sesiones ejecutadas (6 módulos: A, B, C, A, B, C), independientemente de cuántos días naturales haya tomado completarlos.

#### CA-14.12 — Conteo persistente

**Dado que** el sistema ha registrado microciclos completados,
**cuando** la aplicación se cierra, se reinicia el dispositivo o se actualiza la app,
**entonces** el conteo de microciclos persiste y se recupera correctamente al reabrir la aplicación.

#### CA-14.13 — Conteo durante período de descarga

**Dado que** el modo de Descarga está activo (CA-14.01),
**cuando** el ejecutante completa las 6 sesiones del microciclo de descarga,
**entonces** el sistema incrementa el contador de microciclos igualmente, ya que un microciclo de descarga es un microciclo completo ejecutado.

#### CA-14.14 — Consulta del conteo

**Dado que** el ejecutante desea conocer su progreso temporal,
**cuando** consulta el conteo de microciclos,
**entonces** el sistema muestra el número total de microciclos completados desde el inicio del uso del sistema.
