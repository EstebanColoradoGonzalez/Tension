# HU-16 — Detectar necesidad de descarga por módulo

## Requisitos relacionados

RF37

## Descripción

Como ejecutante, quiero que el sistema detecte automáticamente cuando un módulo necesita descarga analizando el estado global de sus ejercicios, para recibir una señal objetiva de que mi Sistema Nervioso Central y mis tejidos conectivos necesitan recuperación antes de que la acumulación de fatiga me lleve a lesión o regresión severa.

## Criterios de Aceptación

### CA-16.01 — Detección por meseta/regresión simultánea

**Dado que** el sistema evalúa el estado de los ejercicios de un módulo al cerrar una sesión,
**cuando** detecta que ≥ 50% de los ejercicios del módulo están simultáneamente en estado de "En Meseta" o clasificados con "Regresión" en la sesión actual,
**entonces** marca el módulo como "Requiere descarga" y emite una señal al ejecutante.

### CA-16.02 — Detección por fatiga acumulada del módulo

**Dado que** el sistema ha detectado fatiga acumulada del módulo en la sesión actual (regresión simultánea en ≥ 50% de los ejercicios — HU-12),
**cuando** completa el análisis post-sesión,
**entonces** marca el módulo como "Requiere descarga" y emite una señal al ejecutante, independientemente del estado de meseta de los ejercicios individuales.

### CA-16.03 — Cálculo del umbral del 50%

**Dado que** el sistema evalúa si un módulo requiere descarga,
**cuando** calcula el porcentaje de ejercicios en meseta/regresión,
**entonces** lo calcula sobre el total de ejercicios prescritos para la versión del módulo actualmente en ejecución (11 para A, 11 para B, 9 para C).

### CA-16.04 — Señal informativa, no bloqueante

**Dado que** el sistema detecta que un módulo requiere descarga,
**cuando** emite la señal al ejecutante,
**entonces** la señal es informativa y recomienda activar el modo de descarga (HU-17), pero no impide al ejecutante continuar entrenando con la carga normal si así lo decide.

### CA-16.05 — Registro de la detección

**Dado que** el sistema detecta que un módulo requiere descarga,
**cuando** completa la evaluación,
**entonces** persiste la detección con la fecha y el módulo afectado, disponible para consulta en el historial.
