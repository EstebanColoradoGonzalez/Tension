# HU-12 — Detectar regresión y fatiga acumulada

## Requisitos relacionados

RF29, RF30

## Descripción

Como ejecutante, quiero que el sistema detecte automáticamente cuando un ejercicio muestra regresión y cuando un módulo completo presenta fatiga acumulada, para tener señales objetivas de que mi cuerpo necesita atención antes de que la acumulación de fatiga comprometa mi progreso o me lleve a una lesión.

## Criterios de Aceptación

### CA-12.01 — Detección de regresión por caída de repeticiones

**Dado que** el sistema compara un ejercicio contra su último registro histórico al cerrar una sesión,
**cuando** detecta que el peso utilizado es igual al de la sesión anterior pero las repeticiones cayeron en ≥ 2 de las 4 series,
**entonces** clasifica al ejercicio con "Regresión" para esta sesión.

### CA-12.02 — Detección de regresión por aumento de RIR

**Dado que** el sistema compara un ejercicio contra su último registro histórico al cerrar una sesión,
**cuando** detecta que la carga es la misma, las repeticiones son similares a la sesión anterior, pero el RIR promedio subió en ≥ 1.5 puntos,
**entonces** clasifica al ejercicio con "Regresión" para esta sesión, interpretando que el ejecutante necesitó más esfuerzo percibido para mantener el mismo rendimiento.

### CA-12.03 — Regresión por caída de carga

**Dado que** el sistema compara un ejercicio contra su último registro histórico,
**cuando** detecta que el peso utilizado es menor al de la sesión anterior,
**entonces** clasifica al ejercicio con "Regresión" para esta sesión.

### CA-12.04 — Detección de fatiga acumulada del módulo

**Dado que** el sistema ha clasificado la progresión de todos los ejercicios registrados en la sesión,
**cuando** identifica regresión simultánea en ≥ 50% de los ejercicios de esa sesión,
**entonces** detecta y registra "Fatiga acumulada del módulo" para el módulo de la sesión.

### CA-12.05 — Umbral del 50% calculado sobre ejercicios registrados

**Dado que** una sesión se cierra como Incompleta con menos ejercicios registrados que los prescritos,
**cuando** el sistema evalúa fatiga acumulada,
**entonces** calcula el umbral del 50% sobre los ejercicios que efectivamente tienen registros en la sesión, no sobre el total de ejercicios prescritos.

### CA-12.06 — Registro de las detecciones

**Dado que** el sistema detecta regresión en un ejercicio o fatiga acumulada en un módulo,
**cuando** completa el análisis post-sesión,
**entonces** persiste las detecciones vinculadas a la sesión para su uso en reglas de decisión posteriores (mesetas, alertas de descarga, KPIs).
